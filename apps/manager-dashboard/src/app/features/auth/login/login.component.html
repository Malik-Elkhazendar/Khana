<div class="auth-layout">
  <a class="skip-link dashboard-skip-link" href="#main-content">{{
    'AUTH.ACCESSIBILITY.SKIP_TO_MAIN_CONTENT' | translate
  }}</a>

  <!-- Form Column (Left/Start) -->
  <main class="auth-form-column" id="main-content">
    <div class="auth-form-container">
      <!-- Logo & Header -->
      <div class="login-header auth-header">
        <div class="header-top">
          <div class="brand-logo" aria-hidden="true">
            <svg viewBox="0 0 32 32" class="logo-icon">
              <rect width="32" height="32" rx="8" fill="currentColor" />
              <path
                d="M10 16h12M16 10v12"
                stroke="#fff"
                stroke-width="3"
                stroke-linecap="round"
              />
            </svg>
          </div>
          <button
            type="button"
            class="lang-toggle-btn"
            (click)="languageService.toggleLanguage()"
            [attr.aria-label]="
              languageService.getCurrentLanguage() === 'en'
                ? ('AUTH.LOGIN.SWITCH_TO_ARABIC' | translate)
                : ('AUTH.LOGIN.SWITCH_TO_ENGLISH' | translate)
            "
          >
            <span class="lang-icon">üåê</span>
            <span class="lang-text">{{
              languageService.getCurrentLanguage() === 'en'
                ? ('AUTH.LOGIN.LANGUAGE_ARABIC' | translate)
                : ('AUTH.LOGIN.LANGUAGE_ENGLISH' | translate)
            }}</span>
          </button>
        </div>
        <h1 class="login-title auth-title">
          {{ 'AUTH.LOGIN.TITLE' | translate }}
        </h1>
        <p class="login-subtitle auth-subtitle">
          {{ 'AUTH.LOGIN.SUBTITLE' | translate }}
        </p>
      </div>

      <!-- Login Form -->
      <form
        [formGroup]="loginForm"
        (ngSubmit)="onSubmit()"
        class="login-form auth-form"
      >
        <!-- Email Field -->
        <div class="form-group auth-field">
          <label for="email" class="form-label auth-label">
            {{ 'AUTH.LOGIN.EMAIL_LABEL' | translate }}
            <span
              class="required auth-required"
              [attr.aria-label]="
                'AUTH.ACCESSIBILITY.REQUIRED_FIELD' | translate
              "
              >*</span
            >
          </label>
          <input
            id="email"
            type="email"
            formControlName="email"
            class="form-input auth-input"
            [placeholder]="'AUTH.LOGIN.EMAIL_PLACEHOLDER' | translate"
            autocomplete="email"
            [attr.aria-invalid]="emailControl?.invalid && emailControl?.touched"
            [attr.aria-describedby]="
              emailControl?.invalid && emailControl?.touched
                ? 'email-error'
                : null
            "
          />
          @if (emailControl?.invalid && emailControl?.touched) {
          <div id="email-error" class="form-error auth-error" role="alert">
            @if (emailControl?.hasError('required')) {
            <span>{{ 'AUTH.VALIDATION.EMAIL_REQUIRED' | translate }}</span>
            } @if (emailControl?.hasError('email')) {
            <span>{{ 'AUTH.VALIDATION.EMAIL_INVALID' | translate }}</span>
            }
          </div>
          }
        </div>

        <!-- Password Field -->
        <div class="form-group auth-field">
          <label for="password" class="form-label auth-label">
            {{ 'AUTH.LOGIN.PASSWORD_LABEL' | translate }}
            <span
              class="required auth-required"
              [attr.aria-label]="
                'AUTH.ACCESSIBILITY.REQUIRED_FIELD' | translate
              "
              >*</span
            >
          </label>
          <input
            id="password"
            type="password"
            formControlName="password"
            class="form-input auth-input"
            [placeholder]="'AUTH.LOGIN.PASSWORD_PLACEHOLDER' | translate"
            autocomplete="current-password"
            [attr.aria-invalid]="
              passwordControl?.invalid && passwordControl?.touched
            "
            [attr.aria-describedby]="
              passwordControl?.invalid && passwordControl?.touched
                ? 'password-error'
                : null
            "
          />
          @if (passwordControl?.invalid && passwordControl?.touched) {
          <div id="password-error" class="form-error auth-error" role="alert">
            @if (passwordControl?.hasError('required')) {
            <span>{{ 'AUTH.VALIDATION.PASSWORD_REQUIRED' | translate }}</span>
            } @if (passwordControl?.hasError('minlength')) {
            <span>{{ 'AUTH.VALIDATION.PASSWORD_MINLENGTH' | translate }}</span>
            }
          </div>
          }
        </div>

        <!-- Global Error Message -->
        @if (authStore.error()) {
        <div
          class="alert-error auth-alert auth-alert--error"
          role="alert"
          aria-live="polite"
        >
          {{ authStore.error() }}
        </div>
        }

        <!-- Submit Button -->
        <button
          type="submit"
          class="btn-primary auth-btn-primary"
          [disabled]="authStore.isLoading()"
          [attr.aria-busy]="authStore.isLoading()"
        >
          @if (authStore.isLoading()) {
          <span class="btn-loading auth-btn-loading">
            <span class="spinner auth-spinner" aria-hidden="true"></span>
            <span>{{ 'AUTH.LOGIN.LOADING_BUTTON' | translate }}</span>
          </span>
          } @else {
          <span>{{ 'AUTH.LOGIN.SUBMIT_BUTTON' | translate }}</span>
          }
        </button>
      </form>

      <!-- Footer Links -->
      <div class="login-footer auth-footer">
        <p class="text-muted auth-text-muted">
          {{ 'AUTH.LOGIN.NO_ACCOUNT' | translate }}
          <a
            routerLink="/register"
            class="link auth-link"
            [attr.aria-label]="'AUTH.LOGIN.REGISTER_LINK' | translate"
          >
            {{ 'AUTH.LOGIN.REGISTER_LINK' | translate }}
          </a>
        </p>
        <p class="text-muted auth-text-muted">
          {{ 'AUTH.LOGIN.FORGOT_PASSWORD' | translate }}
          <a routerLink="/forgot-password" class="link auth-link">{{
            'AUTH.LOGIN.RESET_LINK' | translate
          }}</a>
        </p>
      </div>
    </div>
  </main>

  <!-- Visual Column (Right/End) -->
  <aside class="auth-visual-column" aria-hidden="true">
    <div class="visual-content">
      <div class="vault-visual">
        <div class="v-ring r-1"></div>
        <div class="v-ring r-2"></div>
        <div class="v-ring r-3"></div>
        <div class="v-core-lock">
          <div class="v-keyhole"></div>
        </div>
        <div class="v-data-stream s-1"></div>
        <div class="v-data-stream s-2"></div>
        <div class="v-data-stream s-3"></div>
      </div>
      <div class="visual-copy">
        <h2>{{ 'AUTH.LOGIN.VISUAL_TITLE' | translate }}</h2>
        <p>{{ 'AUTH.LOGIN.VISUAL_TEXT' | translate }}</p>
      </div>
    </div>
  </aside>
</div>
