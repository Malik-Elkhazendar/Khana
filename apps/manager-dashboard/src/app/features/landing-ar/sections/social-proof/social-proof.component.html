<div class="section-container">
  <!-- Background -->
  <div class="section-bg" aria-hidden="true">
    <div class="bg-gradient"></div>
  </div>

  <!-- Section Header -->
  <header class="section-header">
    <span class="section-eyebrow">الثقة</span>
    <h2 class="section-title">
      موثوق من قبل
      <span class="text-gradient">القادة</span>
    </h2>
    <p class="section-subtitle">
      يحبها مديرو الحجوزات عبر الشرق الأوسط وشمال أفريقيا
    </p>
  </header>

  <!-- Stats Row -->
  <div class="stats-row" role="list" aria-label="الإحصاءات الرئيسية">
    @for (stat of stats; track stat.label) {
    <div class="stat-item" role="listitem">
      <span class="stat-value">
        {{ stat.value }}
        @if (stat.suffix) {
        <span class="stat-suffix">{{ stat.suffix }}</span>
        }
      </span>
      <span class="stat-label">{{ stat.label }}</span>
    </div>
    }
  </div>

  <!-- Testimonials Carousel -->
  <div class="testimonials-wrapper">
    <!-- Navigation Arrows -->
    <button
      type="button"
      class="carousel-nav nav-prev"
      (click)="prevSlide()"
      [disabled]="currentIndex() === 0"
      aria-label="الشهادة السابقة"
    >
      <svg
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path d="M15 19l-7-7 7-7" />
      </svg>
    </button>

    <div class="testimonials-container">
      <div
        class="testimonials-track"
        [style.transform]="
          'translateX(calc(-' +
          trackIndex() +
          ' * (100% / ' +
          visibleCount() +
          ')))'
        "
      >
        @for (testimonial of testimonials; track testimonial.id) {
        <article
          class="testimonial-card"
          [attr.aria-label]="'شهادة من ' + testimonial.author"
        >
          <!-- Quote Mark -->
          <div class="quote-mark" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"
              />
            </svg>
          </div>

          <!-- Rating -->
          <div
            class="rating"
            aria-label="تقييم {{ testimonial.rating }} من 5 نجوم"
          >
            @for (star of [1, 2, 3, 4, 5]; track star) {
            <svg
              viewBox="0 0 20 20"
              fill="currentColor"
              [class.filled]="star <= testimonial.rating"
              aria-hidden="true"
            >
              <path
                d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
              />
            </svg>
            }
          </div>

          <!-- Quote -->
          <blockquote class="testimonial-quote">
            "{{ testimonial.quote }}"
          </blockquote>

          <!-- Author -->
          <footer class="testimonial-author">
            <div class="author-avatar">
              <!-- IMAGE PLACEHOLDER: Avatar will go here -->
              <span class="avatar-initials">{{
                testimonial.avatarInitials
              }}</span>
            </div>
            <div class="author-info">
              <cite class="author-name">{{ testimonial.author }}</cite>
              <span class="author-role">{{ testimonial.role }}</span>
              <span class="author-company">{{ testimonial.company }}</span>
            </div>
          </footer>
        </article>
        }
      </div>
    </div>

    <button
      type="button"
      class="carousel-nav nav-next"
      (click)="nextSlide()"
      [disabled]="currentIndex() >= maxIndex()"
      aria-label="الشهادة التالية"
    >
      <svg
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path d="M9 5l7 7-7 7" />
      </svg>
    </button>
  </div>

  <!-- Dots Indicator -->
  <div class="carousel-dots" role="tablist" aria-label="تنقل الشهادات">
    @for (dot of dotsArray(); track $index) {
    <button
      type="button"
      role="tab"
      class="dot"
      [class.active]="$index === currentIndex()"
      (click)="goToSlide($index)"
      [attr.aria-selected]="$index === currentIndex()"
      [attr.aria-label]="'انتقل إلى الشهادة رقم ' + ($index + 1)"
    ></button>
    }
  </div>

  <!-- Trust Badges -->
  <div class="trust-badges" aria-label="شارات الثقة">
    <div class="badge">
      <svg
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        aria-hidden="true"
      >
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
        <path d="M9 12l2 2 4-4" />
      </svg>
      <span>أمان على مستوى البنوك</span>
    </div>
    <div class="badge">
      <svg
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        aria-hidden="true"
      >
        <circle cx="12" cy="12" r="10" />
        <path d="M12 6v6l4 2" />
      </svg>
      <span>99.9% توافر</span>
    </div>
    <div class="badge">
      <svg
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        aria-hidden="true"
      >
        <path d="M22 11.08V12a10 10 0 11-5.93-9.14" />
        <path d="M22 4L12 14.01l-3-3" />
      </svg>
      <span>متوافق مع GDPR</span>
    </div>
  </div>
</div>
